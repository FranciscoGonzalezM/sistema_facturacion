{% extends 'base.html' %}

{% block title %}Dashboard - Organización{% endblock %}

{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="h3">Dashboard de la Organización</h1>
    <div>
      {% if request.user.is_authenticated %}
        <a class="btn btn-outline-secondary me-2" href="/productos/">Productos</a>
        <a class="btn btn-outline-secondary me-2" href="/clientes/">Clientes</a>
        <a class="btn btn-outline-secondary me-2" href="/facturas/">Facturas</a>
        <a class="btn btn-outline-secondary me-2" href="/proveedores/">Proveedores</a>
        {% if request.organizacion %}
          <a class="btn btn-primary" href="{% url 'organizaciones:editar' %}">Editar empresa</a>
        {% endif %}
        <a class="btn btn-link ms-2" href="{% url 'logout' %}">Salir</a>
      {% endif %}
    </div>
  </div>

  <div class="card">
    <div class="card-body">
      <div class="row mt-4">
        <div class="col-md-4">
          <div class="alert alert-primary">Total clientes: <strong>{{ total_clientes }}</strong></div>
        </div>
        <div class="col-md-4">
          <div class="alert alert-success">Total productos: <strong>{{ total_productos }}</strong></div>
        </div>
        <div class="col-md-4">
          <div class="alert alert-info">Total categorías: <strong>{{ total_categorias }}</strong></div>
        </div>
      </div>

      <div class="row mt-3">
        <div class="col-md-6">
          <div class="alert alert-warning">Total facturas: <strong>{{ total_facturas }}</strong></div>
        </div>
        <div class="col-md-6">
          <div class="alert alert-danger">Facturas pendientes: <strong>{{ facturas_pendientes }}</strong></div>
        </div>
      </div>

      <p class="mt-4">Usuario: <strong>{{ request.user.username }}</strong></p>
      {% if request.organizacion %}
        <div class="mt-3">
          <h5>Empresa activa: <strong>{{ request.organizacion.nombre }}</strong></h5>
          {% if request.organizacion.logo %}
            <img src="{{ request.organizacion.logo.url }}" alt="Logo" style="max-height:80px;" />
          {% endif %}
        </div>
      {% endif %}
    </div>
  </div>
{% endblock %}
